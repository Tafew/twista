{% extends 'base.html' %}

{% block content %}

<div class="mdl-grid">
    <div class="mdl-cell mdl-cell--4-col">
        <div class="mdl-card mdl-shadow--2dp">
            <div class="mdl-card__title">
                <h2 class="mdl-card__title-text">User @{{ user['screen_name'] }}</h2>
            </div>
            <div class="mdl-card__supporting-text">
                {{ user['description'] | safe }}
            </div>
            <div class="mdl-card__supporting-text">
                {% if user['url'] %}
                <a class="web" href="{{ user['url'] }}">Link</a><br>
                {% endif %}
                Since: <span class="created">{{ user['created_at'] }}</span><br>
                Location: <span class="location">{{ user['location'] }}</span><br>
                Follower: <span class="follower">{{ user['friends'] }}</span><br>
                Listed: <span class="listed">{{ user['listed'] }}</span><br>
                Posts: <span class="posts">{{ user['statuses'] }}</span>
            </div>
        </div>
    </div>

    <div class="mdl-cell mdl-cell--4-col">
        <div class="mdl-card mdl-shadow--2dp">
            <div class="mdl-card__title">
                <h2 class="mdl-card__title-text">Retweeting network</h2>
            </div>
            <div id='retweeters' class="mdl-card__supporting-text">
                <div class="mdl-spinner mdl-js-spinner is-active"></div>
                <script>
                    loadText("/user/{{ user['id'] }}/retweeters", { 
                            'begin': localStorage.getItem('begin'), 
                            'end': localStorage.getItem('end')
                        }, 
                        response => document.getElementById('retweeters').innerHTML = response
                    );
                </script>
            </div>
        </div>
    </div>

    <div class="mdl-cell mdl-cell--4-col">
        <div class="mdl-card mdl-shadow--2dp">
            <div class="mdl-card__title">
                <h2 class="mdl-card__title-text">Associated tags</h2>
            </div>
            <div id='tags' class="mdl-card__supporting-text">
                <div class="mdl-spinner mdl-js-spinner is-active"></div>
                <script>
                    loadText("/user/{{ user['id'] }}/tags", { 
                            'begin': localStorage.getItem('begin'), 
                            'end': localStorage.getItem('end')
                        }, 
                        response => document.getElementById('tags').innerHTML = response
                    );
                </script>
            </div>
        </div>
    </div>

    <div class="mdl-cell mdl-cell--8-col">
        <div class="mdl-card mdl-shadow--2dp">
            <div class="mdl-card__title">
                <h2 class="mdl-card__title-text">Posting activity</h2>
            </div>
            <div id='activity' class="mdl-card__supporting-text">
                <div class="mdl-spinner mdl-js-spinner is-active"></div>
                <script>
                    loadJson("/user/{{ user['id'] }}/activity", { 
                            'begin': localStorage.getItem('begin'), 
                            'end': localStorage.getItem('end')
                        }, 
                        data => plot(document.getElementById('activity'), data)
                    );
                </script>
            </div>
        </div>
    </div>

    <div class="mdl-cell mdl-cell--4-col">
        <div class="mdl-card mdl-shadow--2dp">
            <div class="mdl-card__title">
                <h2 class="mdl-card__title-text">Posting behaviour</h2>
            </div>
            <div id='behaviour' class="mdl-card__supporting-text">
                <div class="mdl-spinner mdl-js-spinner is-active"></div>
                <script>
                    loadJson("/user/{{ user['id'] }}/behaviour", { 
                            'begin': localStorage.getItem('begin'), 
                            'end': localStorage.getItem('end')
                        }, 
                        data => plot(document.getElementById('behaviour'), data)
                    );
                </script>
            </div>
        </div>
    </div>

    <div class="mdl-cell mdl-cell--8-col">
        <div class="mdl-card mdl-shadow--2dp">
            <div class="mdl-card__title">
                <h2 class="mdl-card__title-text">Tweets with maximum impact</h2>
            </div>
            <div id='tweetlist' class="mdl-card__supporting-text">
                <div class="mdl-spinner mdl-js-spinner is-active"></div>
                <script>
                    loadText("/user/{{ user['id'] }}/tweets", { 
                            'begin': localStorage.getItem('begin'), 
                            'end': localStorage.getItem('end')
                        }, 
                        response => document.getElementById('tweetlist').innerHTML = response
                    );
                </script>
            </div>
        </div>
    </div>
    
</div>

{% endblock %}